# 最简MVP版本重构需求

## 🎯 重构目标

创建一个最简化的MVP版本，专注于核心功能，去除冗余代码，提升性能和可维护性。

## 📋 核心功能保留清单

### 1. 表单功能 (必须保留)
- [x] 7个必填字段的表单
- [x] 表单验证
- [x] 响应式设计
- [x] 店铺品类下拉选择

### 2. AI生成功能 (必须保留)
- [x] 流式响应生成
- [x] 多模型选择
- [x] 关键词拓展
- [x] 生成状态显示

### 3. 导出功能 (必须保留)
- [x] PDF导出
- [x] Word导出
- [x] 文件命名优化
- [x] 导出状态反馈

### 4. 视觉功能 (必须保留)
- [x] Banner图片生成
- [x] 内容渲染
- [x] 目录导航
- [x] 加载动画

## 🗑️ 移除功能清单

### 1. 冗余组件
- [ ] `form-section-refactored.tsx` - 重复组件
- [ ] `export-tools.tsx` - 功能重复
- [ ] `copy-protection-demo.tsx` - 演示组件
- [ ] `copy-settings-manager.tsx` - 复杂配置
- [ ] `section-collapsible.tsx` - 不必要的折叠

### 2. 未使用的Hooks
- [ ] `use-focus-management.ts` - 焦点管理过于复杂
- [ ] `use-form-validation.ts` - 验证逻辑重复
- [ ] `use-performance-monitor.ts` - 性能监控非核心
- [ ] `use-sections.ts` - 章节管理复杂
- [ ] `use-mobile.tsx` - 移动端检测可简化

### 3. 复杂功能
- [ ] 批量输入功能 - 用户使用率低
- [ ] 高级模型设置 - 简化为基础选择
- [ ] 复杂的关键词面板 - 简化为基础建议
- [ ] 多步骤进度条 - 简化为两步

### 4. 测试和演示文件
- [ ] `test-output/` 目录
- [ ] `examples/` 目录
- [ ] `test-*.html` 文件
- [ ] 开发测试脚本（保留核心测试）

## 🏗️ 重构架构

### 简化后的文件结构
```
app/
├── page.tsx                 # 主页面（简化）
├── api/
│   ├── generate-plan/       # AI生成API
│   ├── generate-pdf/        # PDF导出API
│   ├── generate-word/       # Word导出API
│   └── expand-keywords/     # 关键词拓展API

components/
├── ui/                      # 基础UI组件
├── form-section.tsx         # 表单组件（简化）
├── content-renderer.tsx     # 内容渲染
├── export-actions.tsx       # 导出操作
└── page-header.tsx          # 页面头部

hooks/
├── use-form-data.ts         # 表单数据管理
├── use-plan-generation.ts   # AI生成逻辑
├── use-banner-image.ts      # Banner图片
└── use-toc.ts              # 目录导航

lib/
├── types.ts                 # 类型定义
├── constants.ts             # 常量配置
├── models.ts               # AI模型配置
├── utils.ts                # 工具函数
└── export/                 # 导出功能
    ├── word-generator.ts
    └── pdf-generator.ts
```

## 🎨 UI/UX简化

### 1. 页面布局简化
- 移除复杂的进度步骤，改为简单的两步流程
- 简化表单布局，使用更直观的设计
- 减少不必要的动画和过渡效果

### 2. 交互简化
- 简化模型选择，只保留3个主要模型
- 移除复杂的关键词面板，改为简单提示
- 简化导出选项，直接显示PDF/Word按钮

### 3. 状态管理简化
- 减少状态变量数量
- 合并相关的状态逻辑
- 简化错误处理机制

## 📈 性能优化目标

### 1. 加载性能
- 减少初始包大小 30%
- 优化组件懒加载
- 减少不必要的重渲染

### 2. 运行时性能
- 简化状态更新逻辑
- 优化事件处理函数
- 减少内存占用

### 3. 网络性能
- 优化API请求
- 减少不必要的网络调用
- 改进缓存策略

## 🔧 技术债务清理

### 1. 代码清理
- 移除未使用的导入
- 删除注释掉的代码
- 统一代码风格

### 2. 依赖优化
- 移除未使用的npm包
- 更新过时的依赖
- 减少包体积

### 3. 配置简化
- 简化构建配置
- 优化开发环境设置
- 清理不必要的配置文件

## ✅ 验收标准

### 1. 功能完整性
- [ ] 所有核心功能正常工作
- [ ] 流式响应体验良好
- [ ] 导出功能稳定可靠
- [ ] 关键词拓展准确

### 2. 性能指标
- [ ] 首屏加载时间 < 2秒
- [ ] 包大小减少 > 30%
- [ ] 内存使用优化 > 20%
- [ ] 构建时间减少 > 40%

### 3. 代码质量
- [ ] 代码行数减少 > 50%
- [ ] 文件数量减少 > 40%
- [ ] 复杂度降低 > 60%
- [ ] 测试覆盖率保持 100%

### 4. 用户体验
- [ ] 界面简洁直观
- [ ] 操作流程顺畅
- [ ] 错误提示清晰
- [ ] 响应速度快

## 📅 实施计划

### 阶段1: 分析和准备 (已完成)
- [x] 代码分析
- [x] 需求梳理
- [x] 架构设计

### 阶段2: 核心重构 (1-2天)
- [ ] 简化主页面组件
- [ ] 重构表单组件
- [ ] 优化状态管理
- [ ] 清理冗余代码

### 阶段3: 功能验证 (0.5天)
- [ ] 核心功能测试
- [ ] 性能基准测试
- [ ] 用户体验验证

### 阶段4: 优化完善 (0.5天)
- [ ] 性能优化
- [ ] 代码清理
- [ ] 文档更新

## 🎯 成功指标

- **代码量**: 从当前的 ~15,000 行减少到 ~7,500 行
- **文件数**: 从当前的 ~80 个文件减少到 ~40 个文件
- **包大小**: 从当前的 ~2MB 减少到 ~1.4MB
- **加载时间**: 从当前的 ~3秒 减少到 ~2秒
- **维护复杂度**: 降低 70%，新功能开发效率提升 50%