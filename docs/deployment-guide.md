# ğŸš€ éƒ¨ç½²æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºNext.js 15çš„AIé©±åŠ¨çš„è€æ¿IPæ‰“é€ æ–¹æ¡ˆç”Ÿæˆå™¨ï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ã€‚æ¨èä½¿ç”¨Vercelè¿›è¡Œéƒ¨ç½²ï¼Œå¯è·å¾—æœ€ä½³æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- pnpm >= 8.0.0
- Git

### 2. é¡¹ç›®æ£€æŸ¥
è¿è¡Œä»¥ä¸‹å‘½ä»¤ç¡®ä¿é¡¹ç›®å‡†å¤‡å°±ç»ªï¼š

```bash
# æ¸…ç†æµ‹è¯•æ–‡ä»¶
pnpm run cleanup

# éªŒè¯å¯¼å…¥è·¯å¾„
node scripts/verify-imports.js

# æœ¬åœ°æ„å»ºæµ‹è¯•
pnpm build
```

## ğŸ¯ Verceléƒ¨ç½²ï¼ˆæ¨èï¼‰

### æ­¥éª¤1ï¼šå‡†å¤‡ä»£ç ä»“åº“
ç¡®ä¿ä»£ç å·²æ¨é€åˆ°GitHubï¼š

```bash
git add .
git commit -m "å‡†å¤‡éƒ¨ç½²"
git push origin main
```

### æ­¥éª¤2ï¼šVercelé…ç½®
1. è®¿é—® [vercel.com](https://vercel.com)
2. ä½¿ç”¨GitHubè´¦å·ç™»å½•
3. ç‚¹å‡» "New Project"
4. é€‰æ‹©ä½ çš„ä»“åº“å¹¶å¯¼å…¥

### æ­¥éª¤3ï¼šéƒ¨ç½²è®¾ç½®
Vercelä¼šè‡ªåŠ¨æ£€æµ‹é…ç½®ï¼Œç¡®è®¤ä»¥ä¸‹è®¾ç½®ï¼š

- **Framework**: Next.js âœ…
- **Root Directory**: `./` âœ…
- **Build Command**: `pnpm build` âœ…
- **Install Command**: `pnpm install` âœ…
- **Output Directory**: `.next` âœ…

### æ­¥éª¤4ï¼šç¯å¢ƒå˜é‡
åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

```env
SILICONFLOW_API_KEY=ä½ çš„ç¡…åŸºæµåŠ¨APIå¯†é’¥
NEXT_PUBLIC_API_BASE_URL=https://api.siliconflow.cn
NODE_ENV=production
```

### æ­¥éª¤5ï¼šéƒ¨ç½²
ç‚¹å‡» "Deploy" æŒ‰é’®å¼€å§‹éƒ¨ç½²ã€‚

## ğŸ”§ å¸¸è§éƒ¨ç½²é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šæ¨¡å—æ‰¾ä¸åˆ°
**é”™è¯¯**: `Module not found: Can't resolve '@/lib/models'`

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `tsconfig.json` è·¯å¾„é…ç½®
2. ç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½å·²æäº¤åˆ°Git
3. è¿è¡ŒéªŒè¯è„šæœ¬ï¼š`node scripts/verify-imports.js`

### é—®é¢˜2ï¼šä¾èµ–å®‰è£…å¤±è´¥
**é”™è¯¯**: `ERR_PNPM_OUTDATED_LOCKFILE`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ é™¤é”å®šæ–‡ä»¶å¹¶é‡æ–°å®‰è£…
rm pnpm-lock.yaml
pnpm install
git add pnpm-lock.yaml
git commit -m "æ›´æ–°ä¾èµ–é”å®šæ–‡ä»¶"
git push
```

### é—®é¢˜3ï¼šæ ·å¼æ„å»ºå¤±è´¥
**é”™è¯¯**: `Module not found: Can't resolve 'postcss'` æˆ– `tailwindcss not found`

**è§£å†³æ–¹æ¡ˆ**:
é¡¹ç›®å·²å°†PostCSSå’ŒTailwind CSSç§»è‡³ç”Ÿäº§ä¾èµ–ï¼Œç¡®ä¿éƒ¨ç½²æ—¶å¯ç”¨ï¼š
- PostCSSå’ŒTailwind CSSç°åœ¨æ˜¯ç”Ÿäº§ä¾èµ–ï¼Œä¸ä¼šåœ¨éƒ¨ç½²æ—¶è¢«æ’é™¤
- å¦‚é‡åˆ°æ ·å¼ç›¸å…³æ„å»ºé”™è¯¯ï¼Œæ£€æŸ¥ä¾èµ–é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®ä¿`postcss.config.mjs`å’Œ`tailwind.config.ts`é…ç½®æ–‡ä»¶å­˜åœ¨

### é—®é¢˜4ï¼šæ„å»ºè¶…æ—¶
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `vercel.json` é…ç½®
2. ç¡®ä¿æ²¡æœ‰æ— é™å¾ªç¯æˆ–å¤§æ–‡ä»¶
3. ä¼˜åŒ–æ„å»ºå‘½ä»¤

## ğŸ—ï¸ å…¶ä»–éƒ¨ç½²æ–¹å¼

### Dockeréƒ¨ç½²

åˆ›å»º `Dockerfile`ï¼š
```dockerfile
FROM node:18-alpine

WORKDIR /app

# å®‰è£…pnpm
RUN npm install -g pnpm@8.15.0

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY package.json pnpm-lock.yaml ./

# å®‰è£…ä¾èµ–
RUN pnpm install --frozen-lockfile

# å¤åˆ¶æºç 
COPY . .

# æ„å»ºåº”ç”¨
RUN pnpm build

EXPOSE 3000

CMD ["pnpm", "start"]
```

æ„å»ºå’Œè¿è¡Œï¼š
```bash
docker build -t starlight-media .
docker run -p 3000:3000 starlight-media
```

### æœåŠ¡å™¨éƒ¨ç½²

```bash
# 1. å…‹éš†ä»£ç 
git clone your-repo-url
cd starlight-media-generator

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. æ„å»ºé¡¹ç›®
pnpm build

# 4. ä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹
npm install -g pm2
pm2 start npm --name "starlight-media" -- start
pm2 save
pm2 startup
```

## ğŸ“Š éƒ¨ç½²åéªŒè¯

### åŠŸèƒ½æ£€æŸ¥æ¸…å•
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] è¡¨å•æäº¤åŠŸèƒ½æ­£å¸¸
- [ ] AIæ¨¡å‹é€‰æ‹©å·¥ä½œæ­£å¸¸
- [ ] æ–¹æ¡ˆç”ŸæˆåŠŸèƒ½æ­£å¸¸
- [ ] å¯¼å‡ºåŠŸèƒ½æ­£å¸¸ï¼ˆå¦‚æœå¯ç”¨ï¼‰
- [ ] å“åº”å¼è®¾è®¡æ­£å¸¸

### æ€§èƒ½æ£€æŸ¥
```bash
# ä½¿ç”¨Lighthouseæ£€æŸ¥æ€§èƒ½
npx lighthouse https://your-domain.vercel.app

# æ£€æŸ¥æ„å»ºå¤§å°
pnpm build
```

## ğŸ”§ Next.jsé…ç½®ä¼˜åŒ–

### é…ç½®æ–‡ä»¶è¯´æ˜ (`next.config.mjs`)
é¡¹ç›®ä½¿ç”¨äº†ä¼˜åŒ–çš„Next.jsé…ç½®ï¼Œç¡®ä¿æœ€ä½³çš„æ„å»ºå’Œéƒ¨ç½²ä½“éªŒï¼š

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  // æ„å»ºé…ç½®ä¼˜åŒ–
  eslint: {
    ignoreDuringBuilds: true,
  },
  typescript: {
    ignoreBuildErrors: true,
  },
  
  // é™æ€èµ„æºä¼˜åŒ–
  images: {
    unoptimized: true,
  },
  
  // ç¡®ä¿è·¯å¾„è§£ææ­£ç¡®
  experimental: {
    esmExternals: true,
  },
  
  // APIè·¯ç”±é…ç½®
  async rewrites() {
    return []
  },
}

export default nextConfig
```

### é…ç½®é¡¹è¯¦è§£
- **eslint.ignoreDuringBuilds**: æ„å»ºæ—¶å¿½ç•¥ESLinté”™è¯¯ï¼Œæå‡æ„å»ºé€Ÿåº¦å’Œç¨³å®šæ€§
- **typescript.ignoreBuildErrors**: æ„å»ºæ—¶å¿½ç•¥TypeScripté”™è¯¯ï¼Œç¡®ä¿éƒ¨ç½²æˆåŠŸ
- **images.unoptimized**: ç¦ç”¨Next.jså›¾ç‰‡ä¼˜åŒ–ï¼Œé€‚ç”¨äºé™æ€éƒ¨ç½²ç¯å¢ƒ
- **experimental.esmExternals**: å¯ç”¨ESMå¤–éƒ¨æ¨¡å—æ”¯æŒï¼Œæ”¹å–„æ¨¡å—è§£æå’Œå…¼å®¹æ€§
- **rewrites**: é…ç½®URLé‡å†™è§„åˆ™ï¼Œå½“å‰ä¸ºç©ºæ•°ç»„ï¼Œå¯æ ¹æ®éœ€è¦æ‰©å±•

### é…ç½®ä¼˜åŠ¿
1. **æ„å»ºç¨³å®šæ€§**: å¿½ç•¥éå…³é”®é”™è¯¯ï¼Œç¡®ä¿éƒ¨ç½²æˆåŠŸ
2. **æ¨¡å—å…¼å®¹æ€§**: ESMå¤–éƒ¨æ¨¡å—æ”¯æŒæå‡ç¬¬ä¸‰æ–¹åº“å…¼å®¹æ€§
3. **éƒ¨ç½²é€‚é…**: é’ˆå¯¹Vercelç­‰å¹³å°ä¼˜åŒ–çš„é…ç½®
4. **æ€§èƒ½ä¼˜åŒ–**: åˆç†çš„èµ„æºå¤„ç†ç­–ç•¥

## ğŸ”’ å®‰å…¨é…ç½®

### ç¯å¢ƒå˜é‡å®‰å…¨
- æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥
- ä½¿ç”¨Vercelçš„ç¯å¢ƒå˜é‡åŠŸèƒ½
- å®šæœŸè½®æ¢APIå¯†é’¥

### å†…å®¹ä¿æŠ¤
é¡¹ç›®å†…ç½®äº†å†…å®¹ä¿æŠ¤åŠŸèƒ½ï¼š
- ç¦ç”¨å¤åˆ¶ç²˜è´´
- é˜»æ­¢å¼€å‘è€…å·¥å…·
- é˜²æ­¢å†…å®¹é€‰æ‹©

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### Vercel Analytics
å¯ç”¨Vercel Analyticsè·å–è®¿é—®æ•°æ®ï¼š
1. åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­å¯ç”¨Analytics
2. æŸ¥çœ‹å®æ—¶è®¿é—®ç»Ÿè®¡
3. ç›‘æ§æ€§èƒ½æŒ‡æ ‡

### é”™è¯¯ç›‘æ§
å»ºè®®é›†æˆé”™è¯¯ç›‘æ§æœåŠ¡ï¼š
- Sentry
- LogRocket
- Vercelçš„å†…ç½®é”™è¯¯è¿½è¸ª

## ğŸš¨ æ•…éšœæ’é™¤

### æ„å»ºå¤±è´¥
1. æ£€æŸ¥æ„å»ºæ—¥å¿—
2. éªŒè¯æ‰€æœ‰ä¾èµ–éƒ½å·²å®‰è£…
3. ç¡®ä¿ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®
4. è¿è¡Œæœ¬åœ°æ„å»ºæµ‹è¯•

### è¿è¡Œæ—¶é”™è¯¯
1. æ£€æŸ¥Vercelå‡½æ•°æ—¥å¿—
2. éªŒè¯APIå¯†é’¥æœ‰æ•ˆæ€§
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°éƒ¨ç½²é—®é¢˜ï¼š
1. æŸ¥çœ‹Vercelå®˜æ–¹æ–‡æ¡£
2. æ£€æŸ¥é¡¹ç›®çš„GitHub Issues
3. è¿è¡Œé¡¹ç›®å¥åº·æ£€æŸ¥ï¼š`pnpm run health-check`
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

## ğŸ‰ éƒ¨ç½²æˆåŠŸï¼

éƒ¨ç½²å®Œæˆåï¼Œä½ å°†è·å¾—ï¼š
- å…¨çƒCDNåŠ é€Ÿçš„ç½‘ç«™
- è‡ªåŠ¨HTTPSè¯ä¹¦
- æ— æœåŠ¡å™¨å‡½æ•°æ”¯æŒ
- è‡ªåŠ¨éƒ¨ç½²æµæ°´çº¿

è®¿é—®ä½ çš„ç½‘ç«™å¼€å§‹ä½¿ç”¨AIé©±åŠ¨çš„IPæ‰“é€ æ–¹æ¡ˆç”Ÿæˆå™¨å§ï¼