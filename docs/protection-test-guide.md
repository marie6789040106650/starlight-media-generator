# 内容保护系统测试指南

## 🧪 快速测试

### 访问测试页面
```
http://localhost:3000/copy-test
```

## 🛡️ 保护功能测试

### 1. 键盘快捷键测试
尝试以下快捷键，应该全部被阻止：

- **Ctrl+C** / **Cmd+C** - 复制
- **Ctrl+X** / **Cmd+X** - 剪切  
- **Ctrl+V** / **Cmd+V** - 粘贴
- **Ctrl+A** / **Cmd+A** - 全选
- **Ctrl+S** / **Cmd+S** - 保存
- **Ctrl+P** / **Cmd+P** - 打印
- **F12** - 开发者工具
- **Ctrl+Shift+I** - 开发者工具
- **Ctrl+U** - 查看源代码

**预期结果**: 
- 操作被阻止
- 控制台显示警告信息
- 屏幕右上角显示红色提示

### 2. 鼠标操作测试
尝试以下鼠标操作：

- **右键点击** - 任意位置右键
- **文本选择** - 尝试选择页面文字
- **图片拖拽** - 尝试拖拽图片
- **链接拖拽** - 尝试拖拽链接

**预期结果**:
- 右键菜单不出现
- 文本无法选择
- 拖拽操作无效
- 显示相应的阻止提示

### 3. 表单功能测试
在表单输入框中测试：

- **文本输入** - 应该正常
- **文本选择** - 应该正常
- **复制粘贴** - 应该正常
- **右键菜单** - 应该正常

**预期结果**:
- 表单功能完全正常
- 不影响用户正常输入

## ⚙️ 配置测试

### 1. 打开配置管理器
点击测试页面的"打开配置管理器"按钮

### 2. 测试不同模式

#### 完全禁用模式（默认）
- allowCopy: false
- showCopyUI: false  
- allowExportAsAlternative: false

**测试**: 所有保护功能生效，导出按钮隐藏

#### 仅导出模式
- allowCopy: false
- showCopyUI: false
- allowExportAsAlternative: true

**测试**: 保护功能生效，导出按钮显示

#### 完全开放模式
- allowCopy: true
- showCopyUI: true
- allowExportAsAlternative: true

**测试**: 所有功能正常，无保护限制

### 3. 实时切换测试
在配置管理器中切换不同模式，观察：
- 保护功能立即生效/失效
- UI元素显示/隐藏
- 状态指示器变化

## 🔍 调试信息

### 控制台日志
打开浏览器控制台（如果允许），查看：
- 🛡️ 保护系统启动日志
- 🚫 操作阻止警告
- 🎨 样式应用日志
- ⚙️ 配置变更日志

### 状态检查
在控制台执行（如果允许）：
```javascript
// 查看当前配置
console.log('当前配置:', window.__copySettings)

// 查看保护状态
console.log('保护状态:', {
  allowCopy: window.__copyAllowed,
  showUI: window.__showCopyUI,
  allowExport: window.__exportAllowed
})
```

## 🐛 常见问题

### 1. 保护功能不生效
**可能原因**:
- 配置被意外修改
- JavaScript被禁用
- 浏览器兼容性问题

**解决方法**:
- 刷新页面重新初始化
- 检查配置管理器设置
- 尝试不同浏览器

### 2. 表单无法正常使用
**可能原因**:
- 表单元素识别错误
- CSS样式冲突

**解决方法**:
- 检查元素是否在form标签内
- 确认元素tagName是否为INPUT/TEXTAREA
- 检查contenteditable属性

### 3. 提示消息不显示
**可能原因**:
- CSS样式被覆盖
- z-index层级问题

**解决方法**:
- 检查页面CSS
- 确认提示元素是否被创建

## 📊 测试报告模板

### 基础保护测试
- [ ] Ctrl+C 复制阻止
- [ ] Ctrl+X 剪切阻止  
- [ ] Ctrl+V 粘贴阻止
- [ ] 右键菜单禁用
- [ ] 文本选择禁用
- [ ] F12 开发者工具阻止

### 表单功能测试
- [ ] 输入框正常输入
- [ ] 输入框文本选择
- [ ] 输入框复制粘贴
- [ ] 文本区域正常编辑

### 配置切换测试
- [ ] 完全禁用模式
- [ ] 仅导出模式
- [ ] 完全开放模式
- [ ] 实时配置更新

### 用户体验测试
- [ ] 阻止提示显示
- [ ] 提示自动消失
- [ ] 控制台日志记录
- [ ] 状态指示器准确

## 🔧 开发者测试

### 临时启用复制（开发用）
```javascript
// 在控制台执行（如果可以访问）
updateCopySettings({ allowCopy: true, showCopyUI: true })
updateProtectionStatus()
```

### 查看详细日志
```javascript
// 启用详细日志
localStorage.setItem('debug-protection', 'true')
// 刷新页面查看详细日志
```

### 性能测试
- 检查事件监听器数量
- 监控内存使用情况
- 测试页面加载速度影响

---

通过这个测试指南，你可以全面验证内容保护系统的功能是否正常工作。