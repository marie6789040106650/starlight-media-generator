# å¼€å‘æ£€æŸ¥æ¸…å•

## ğŸš€ å¼€å§‹å¼€å‘å‰å¿…é¡»æ£€æŸ¥

### åŒ…ç®¡ç†å™¨ç¡®è®¤
```bash
# è¿è¡ŒåŒ…ç®¡ç†å™¨æ£€æŸ¥è„šæœ¬
pnpm run check-pm
# æˆ–è€…ç›´æ¥è¿è¡Œè„šæœ¬
bash scripts/check-package-manager.sh
```

### é¡¹ç›®é…ç½®æ£€æŸ¥
- [ ] ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„åŒ…ç®¡ç†å™¨ (pnpm/npm/yarn)
- [ ] æ£€æŸ¥ lock æ–‡ä»¶ç±»å‹
- [ ] éªŒè¯ package.json ä¸­çš„é™åˆ¶
- [ ] ç¡®è®¤å¯ç”¨çš„è„šæœ¬å‘½ä»¤

### å¸¸è§å‘½ä»¤æ˜ å°„

| æ“ä½œ | pnpm | npm | yarn |
|------|------|-----|------|
| å®‰è£…ä¾èµ– | `pnpm install` | `npm install` | `yarn install` |
| å¯åŠ¨å¼€å‘ | `pnpm dev` | `npm run dev` | `yarn dev` |
| æ„å»ºé¡¹ç›® | `pnpm build` | `npm run build` | `yarn build` |
| è¿è¡Œæµ‹è¯• | `pnpm test` | `npm test` | `yarn test` |
| æ·»åŠ ä¾èµ– | `pnpm add <pkg>` | `npm install <pkg>` | `yarn add <pkg>` |

## ğŸ” å½“å‰é¡¹ç›®é…ç½®

æ ¹æ®æ£€æŸ¥è„šæœ¬ç»“æœï¼Œæœ¬é¡¹ç›®ä½¿ç”¨ï¼š
- **åŒ…ç®¡ç†å™¨**: pnpm
- **Lockæ–‡ä»¶**: pnpm-lock.yaml
- **é™åˆ¶**: åªå…è®¸ä½¿ç”¨ pnpm (preinstall è„šæœ¬)

## âš ï¸ å¸¸è§é”™è¯¯é¿å…

1. **ä¸è¦æ··ç”¨åŒ…ç®¡ç†å™¨**
   - âŒ é”™è¯¯: `npm install` ç„¶å `pnpm dev`
   - âœ… æ­£ç¡®: ç»Ÿä¸€ä½¿ç”¨ `pnpm install` å’Œ `pnpm dev`

2. **æ£€æŸ¥é¡¹ç›®é™åˆ¶**
   - å¦‚æœæœ‰ `preinstall` è„šæœ¬ï¼Œå¿…é¡»ä½¿ç”¨æŒ‡å®šçš„åŒ…ç®¡ç†å™¨
   - ä¸è¦å¼ºåˆ¶ç»•è¿‡é™åˆ¶

3. **ä¿æŒ lock æ–‡ä»¶ä¸€è‡´**
   - ä¸è¦åŒæ—¶å­˜åœ¨å¤šä¸ª lock æ–‡ä»¶
   - æäº¤æ—¶åŒ…å«æ­£ç¡®çš„ lock æ–‡ä»¶

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¦‚æœå‘½ä»¤æ‰§è¡Œå¤±è´¥
```bash
# 1. æ£€æŸ¥åŒ…ç®¡ç†å™¨é…ç½®
pnpm run check-pm

# 2. æ¸…ç†å¹¶é‡æ–°å®‰è£…
rm -rf node_modules
rm package-lock.json yarn.lock  # åˆ é™¤é”™è¯¯çš„ lock æ–‡ä»¶
pnpm install  # ä½¿ç”¨æ­£ç¡®çš„åŒ…ç®¡ç†å™¨

# 3. ä½¿ç”¨æ™ºèƒ½å¯åŠ¨è„šæœ¬
pnpm run smart-dev
```

### å¦‚æœé‡åˆ°æƒé™é—®é¢˜
```bash
# æ£€æŸ¥ preinstall è„šæœ¬
grep preinstall package.json

# å¦‚æœè¢«é˜»æ­¢ï¼Œä½¿ç”¨æ­£ç¡®çš„åŒ…ç®¡ç†å™¨
pnpm install  # è€Œä¸æ˜¯ npm install
```